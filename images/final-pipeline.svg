<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600">
  <!-- Background -->
  <rect width="1000" height="600" fill="#f8f9fa" rx="10" ry="10" />
  <rect x="10" y="10" width="980" height="580" fill="white" rx="8" ry="8" stroke="#e0e0e0" stroke-width="1" />
  
  <!-- Title -->
  <text x="500" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Ontology-Enhanced RAG System Pipeline</text>
  
  <!-- Data Sources Section -->
  <rect x="40" y="80" width="200" height="120" fill="#e1f5fe" stroke="#4fc3f7" stroke-width="2" rx="8" ry="8" />
  <text x="140" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#0288d1">Data Sources</text>
  
  <!-- Data Source Items -->
  <rect x="60" y="120" width="160" height="30" fill="#bbdefb" rx="4" ry="4" />
  <text x="140" y="140" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">enterprise_ontology.json</text>
  
  <rect x="60" y="160" width="160" height="30" fill="#bbdefb" rx="4" ry="4" />
  <text x="140" y="180" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">enterprise_ontology.txt</text>
  
  <!-- Ontology Processing Section -->
  <rect x="40" y="240" width="200" height="180" fill="#e8f5e9" stroke="#66bb6a" stroke-width="2" rx="8" ry="8" />
  <text x="140" y="265" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2e7d32">Ontology Processing</text>
  
  <!-- Ontology Processing Items -->
  <rect x="60" y="280" width="160" height="30" fill="#c8e6c9" rx="4" ry="4" />
  <text x="140" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">OntologyManager</text>
  
  <rect x="60" y="320" width="160" height="30" fill="#c8e6c9" rx="4" ry="4" />
  <text x="140" y="340" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">KnowledgeGraph</text>
  
  <rect x="60" y="360" width="160" height="30" fill="#c8e6c9" rx="4" ry="4" />
  <text x="140" y="380" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Graph Building</text>
  
  <!-- Indexing & Retrieval Section -->
  <rect x="290" y="160" width="200" height="180" fill="#fff8e1" stroke="#ffd54f" stroke-width="2" rx="8" ry="8" />
  <text x="390" y="185" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#f9a825">Indexing & Retrieval</text>
  
  <!-- Indexing & Retrieval Items -->
  <rect x="310" y="200" width="160" height="30" fill="#ffecb3" rx="4" ry="4" />
  <text x="390" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Text Embedding (OpenAI)</text>
  
  <rect x="310" y="240" width="160" height="30" fill="#ffecb3" rx="4" ry="4" />
  <text x="390" y="260" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Vector Store (FAISS)</text>
  
  <rect x="310" y="280" width="160" height="30" fill="#ffecb3" rx="4" ry="4" />
  <text x="390" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">SemanticRetriever</text>
  
  <!-- Query Processing Section -->
  <rect x="540" y="80" width="200" height="120" fill="#e8eaf6" stroke="#7986cb" stroke-width="2" rx="8" ry="8" />
  <text x="640" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#3949ab">Query Processing</text>
  
  <!-- Query Processing Items -->
  <rect x="560" y="120" width="160" height="30" fill="#c5cae9" rx="4" ry="4" />
  <text x="640" y="140" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">User Query Input</text>
  
  <rect x="560" y="160" width="160" height="30" fill="#c5cae9" rx="4" ry="4" />
  <text x="640" y="180" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Query Analysis</text>
  
  <!-- Comparison Pipeline Section -->
  <rect x="790" y="80" width="170" height="320" fill="#e0f2f1" stroke="#80cbc4" stroke-width="2" rx="8" ry="8" />
  <text x="875" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#00796b">Comparison Pipeline</text>
  
  <!-- Comparison Items -->
  <rect x="805" y="125" width="140" height="40" fill="#b2dfdb" rx="4" ry="4" />
  <text x="875" y="150" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Traditional RAG</text>
  
  <rect x="805" y="195" width="140" height="40" fill="#b2dfdb" rx="4" ry="4" />
  <text x="875" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Ontology-Enhanced RAG</text>
  
  <rect x="805" y="265" width="140" height="40" fill="#b2dfdb" rx="4" ry="4" />
  <text x="875" y="290" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Comparative Analysis</text>
  
  <!-- Response Generation Section -->
  <rect x="540" y="240" width="200" height="180" fill="#f3e5f5" stroke="#ba68c8" stroke-width="2" rx="8" ry="8" />
  <text x="640" y="265" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#7b1fa2">Response Generation</text>
  
  <!-- Response Generation Items -->
  <rect x="560" y="280" width="160" height="30" fill="#e1bee7" rx="4" ry="4" />
  <text x="640" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Context Assembly</text>
  
  <rect x="560" y="320" width="160" height="30" fill="#e1bee7" rx="4" ry="4" />
  <text x="640" y="340" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">LLM (OpenAI GPT)</text>
  
  <rect x="560" y="360" width="160" height="30" fill="#e1bee7" rx="4" ry="4" />
  <text x="640" y="380" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Response Formatting</text>
  
  <!-- Visualization Section -->
  <rect x="290" y="380" width="200" height="160" fill="#ffebee" stroke="#ef9a9a" stroke-width="2" rx="8" ry="8" />
  <text x="390" y="405" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#c62828">Visualization</text>
  
  <!-- Visualization Items -->
  <rect x="310" y="420" width="160" height="30" fill="#ffcdd2" rx="4" ry="4" />
  <text x="390" y="440" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Graph Visualization</text>
  
  <rect x="310" y="460" width="160" height="30" fill="#ffcdd2" rx="4" ry="4" />
  <text x="390" y="480" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Path Visualization</text>
  
  <rect x="310" y="500" width="160" height="30" fill="#ffcdd2" rx="4" ry="4" />
  <text x="390" y="520" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Reasoning Trace</text>
  
  <!-- User Interface Section -->
  <rect x="540" y="460" width="420" height="100" fill="#f9fbe7" stroke="#dce775" stroke-width="2" rx="8" ry="8" />
  <text x="750" y="485" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#827717">User Interface (Streamlit)</text>
  
  <!-- UI Items -->
  <rect x="620" y="500" width="130" height="30" fill="#f0f4c3" rx="4" ry="4" />
  <text x="685" y="520" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">RAG Comparison</text>
  
  <rect x="780" y="500" width="130" height="30" fill="#f0f4c3" rx="4" ry="4" />
  <text x="845" y="520" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">Entity Exploration</text>
  
  <!-- Arrows with right angles -->
  <!-- Data Source to Ontology Processing -->
  <path d="M140 200 L140 240" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Data Source to Indexing -->
  <path d="M240 140 L265 140 L265 215 L290 215" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Ontology Processing to Indexing -->
  <path d="M240 300 L265 300 L265 255 L290 255" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Ontology Processing to Visualization -->
  <path d="M240 370 L265 370 L265 460 L290 460" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Query to Indexing -->
  <path d="M540 175 L515 175 L515 215 L490 215" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Indexing to Response Generation -->
  <path d="M490 250 L515 250 L515 300 L540 300" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Query to Comparison (Traditional RAG) -->
  <path d="M740 145 L765 145 L765 145 L805 145" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Response Generation to Comparison (Ontology-Enhanced RAG) -->
  <path d="M740 300 L765 300 L765 215 L805 215" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Response Generation to UI -->
  <path d="M640 420 L640 460" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Visualization to UI -->
  <path d="M390 540 L390 560 L640 560 L640 560" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Comparison Analysis to UI -->
  <path d="M875 305 L875 425 L845 425 L845 500" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
  
  <!-- Arrowhead marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="40" y="460" width="200" height="100" fill="white" stroke="#ccc" stroke-width="1" rx="4" ry="4" />
  <text x="140" y="480" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Key Components</text>
  
  <!-- Key Component Items (Fixed text positioning) -->
  <rect x="50" y="490" width="15" height="15" fill="#e8f5e9" stroke="#66bb6a" stroke-width="1" />
  <text x="75" y="502" font-family="Arial, sans-serif" font-size="11" text-anchor="start">Core Ontology Components</text>
  
  <rect x="50" y="515" width="15" height="15" fill="#fff8e1" stroke="#ffd54f" stroke-width="1" />
  <text x="75" y="527" font-family="Arial, sans-serif" font-size="11" text-anchor="start">Retrieval Components</text>
  
  <rect x="50" y="540" width="15" height="15" fill="#e0f2f1" stroke="#80cbc4" stroke-width="1" />
  <text x="75" y="552" font-family="Arial, sans-serif" font-size="11" text-anchor="start">Comparison Components</text>
  
  <!-- Footer -->
  <text x="500" y="585" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Ontology-Enhanced RAG System Pipeline Architecture</text>
</svg>
